# Assistant Commit Policy (作業用ポリシー)

このリポジトリ内でアシスタントがコードの変更を作成・コミットする際の運用ルールを明文化します。

目的
- コミットメッセージなどのやり取りが「命令」として誤解されるのを防ぐ
- 変更内容を説明し、ユーザーの明示的承認を得てから git commit/push を実行する

基本ルール
1. 変更を作成したとき、アシスタントはファイルの差分と提案するコミットメッセージを提示します。
2. アシスタントはユーザーの明示的な承認（例: 「承認します」「commitしてください」など明確な合図）を受け取るまで、実際の `git commit` や `git push` を行いません。
	- 追加: コミットメッセージは事前に `.github/last_commit_message.txt`（または合意されたファイル）へ出力して確認できるようにします。付属のスクリプト `.github/commit_message_helper.sh "<message>"` を使ってメッセージを書き出せます。
3. コミットメッセージは必ず件名（概要）と本文（変更理由/影響/検証手順）を含めます。件名は命令形を避け、動詞の命名規則は `chore:`, `feat:`, `fix:` などのプレフィックスを使います（必要に応じてリポジトリで合意された形式に合わせます）。
4. 自動化／スクリプトによりコミットする場合でも、事前にユーザーへ通知し、承認を得ます。

推奨フロー（アシスタントが実行する手順）
1. 変更をワークツリーへ書き込む。
2. `git diff --staged` 相当の差分を提示する（またはパッチを表示）。
3. 提案コミットメッセージを表示。
4. ユーザーが明示的に承認したら `git commit` を実行する（必要なら `git push` は別承認）。

運用上の注意
- コミットメッセージにユーザーの指示を書き込まない。メッセージは作業の記録であり、命令ではありません。
- ユーザーが速やかな自動コミットを希望する場合はその旨を事前に合意し、署名付きの短縮フローを使います。

このファイルは運用上のガイドラインです。変更提案や改善があれば Issue/PR で議論してください。

作成日: 2025-11-12
